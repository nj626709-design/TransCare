{% extends "base.html" %}
{% block content %}
<h2 class="text-primary">Request a Quote / Booking</h2>

<form action="{{ url_for('quote') }}" method="POST">
  <div class="row">

    <div class="col-md-6 mb-3">
      <label>Name</label>
      <input type="text" name="name" class="form-control" required>
    </div>

    <div class="col-md-6 mb-3">
      <label>Email</label>
      <input type="email" name="email" class="form-control" required>
    </div>

    <div class="col-md-6 mb-3">
      <label>Phone</label>
      <input type="text" name="phone" class="form-control" required>
    </div>

    <!-- MAIN VEHICLE TYPE -->
    <div class="col-md-6 mb-3">
      <label>Vehicle Type</label>
      <select name="vehicle_type" id="vehicleType" class="form-select" required>
        <option value="">Select Vehicle</option>
        <option value="car">Car</option>
        <option value="bus">Bus</option>
        <option value="truck">Truck</option>
        <option value="ambulance">Ambulance</option>
        <option value="crane">Crane</option>
      </select>
    </div>

    <!-- VEHICLE SUB TYPE -->
    <div class="col-md-6 mb-3 d-none" id="subVehicleDiv">
      <label>Vehicle Size</label>
      <select name="vehicle_subtype" id="vehicleSubType" class="form-select">
        <!-- options added via JS -->
      </select>
    </div>

    <div class="col-md-6 mb-3">
      <label>Date Needed</label>
      <input type="date" name="date_needed" class="form-control" required>
    </div>

    <div class="col-12 mb-3">
      <label>Message</label>
      <textarea name="message" class="form-control" rows="4"></textarea>
    </div>

  </div>

  <button class="btn btn-primary">Submit</button>
</form>

<!-- JAVASCRIPT -->
<script>
const vehicleType = document.getElementById("vehicleType");
const subVehicleDiv = document.getElementById("subVehicleDiv");
const vehicleSubType = document.getElementById("vehicleSubType");

const options = {
  car: ["Hatchback", "Sedan", "SUV", "Premium SUV"],
  bus: ["20 Seater", "31 Seater", "50 Seater", "AC / Non-AC"],
  truck: ["Tata Ace", "Pickup", "20 ft Truck", "40 ft Truck"],
  ambulance: ["Basic Ambulance", "Cardiac Ambulance", "ICU Ambulance", "AC / Non-AC"],
  crane: ["15 Ton Farana", "23 Ton Farana", "60 Ton Telescope Crane", "110 Ton Telescope Crane", "Sizzir Lift", "Boom Lift"]
};

vehicleType.addEventListener("change", function () {
  const selected = this.value;
  vehicleSubType.innerHTML = "";

  if (options[selected]) {
    subVehicleDiv.classList.remove("d-none");

    options[selected].forEach(item => {
      const opt = document.createElement("option");
      opt.value = item;
      opt.textContent = item;
      vehicleSubType.appendChild(opt);
    });
  } else {
    subVehicleDiv.classList.add("d-none");
  }
});
</script>

{% endblock %}
